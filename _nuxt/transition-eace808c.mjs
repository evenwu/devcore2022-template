function p(e){let t={called:!1};return(...a)=>{if(!t.called)return t.called=!0,e(...a)}}function m(){let e=[],t=[],a={enqueue(n){t.push(n)},requestAnimationFrame(...n){let i=requestAnimationFrame(...n);a.add(()=>cancelAnimationFrame(i))},nextFrame(...n){a.requestAnimationFrame(()=>{a.requestAnimationFrame(...n)})},setTimeout(...n){let i=setTimeout(...n);a.add(()=>clearTimeout(i))},add(n){e.push(n)},dispose(){for(let n of e.splice(0))n()},async workQueue(){for(let n of t.splice(0))await n()}};return a}function c(e,...t){e&&t.length>0&&e.classList.add(...t)}function d(e,...t){e&&t.length>0&&e.classList.remove(...t)}var F=(e=>(e.Finished="finished",e.Cancelled="cancelled",e))(F||{});function h(e,t){let a=m();if(!e)return a.dispose;let{transitionDuration:n,transitionDelay:i}=getComputedStyle(e),[l,s]=[n,i].map(r=>{let[u=0]=r.split(",").filter(Boolean).map(o=>o.includes("ms")?parseFloat(o):parseFloat(o)*1e3).sort((o,f)=>f-o);return u});return l!==0?a.setTimeout(()=>t("finished"),l+s):t("finished"),a.add(()=>t("cancelled")),a.dispose}function q(e,t,a,n,i,l){let s=m(),r=l!==void 0?p(l):()=>{};return d(e,...i),c(e,...t,...a),s.nextFrame(()=>{d(e,...a),c(e,...n),s.add(h(e,u=>(d(e,...n,...t),c(e,...i),r(u))))}),s.add(()=>d(e,...t,...a,...n,...i)),s.add(()=>r("cancelled")),s.dispose}export{F as Reason,q as transition};
