import{u as x,P,R as U}from"./render-a3268961.mjs";import{o as se}from"./keyboard-c50452c7.mjs";import{t as S}from"./use-id-2e145a0f.mjs";import{FocusTrap as R}from"./focus-trap-3ef02398.mjs";import{e as N}from"./owner-ef86f285.mjs";import{l as F,j as g,v as O,z as Q,q,p as X,i as w,k as v,A as ue,m as y}from"./entry-e833c832.mjs";import{R as Z,L as de,P as H}from"./portal-e6290ce5.mjs";import{useDescriptions as pe,Description as fe}from"./description-c6fcfa56.mjs";import{o as V}from"./dom-d07dd68d.mjs";import{p as ce,l as Y}from"./open-closed-60cf01bc.mjs";import{T as ve}from"./use-outside-click-e9d95a18.mjs";import{r as ge}from"./use-event-listener-422bd38e.mjs";import{m as me,p as he}from"./hidden-2d29a848.mjs";import"./focus-management-a746db8b.mjs";import"./use-window-event-e76f3a5c.mjs";let G="body > *",b=new Set,h=new Map;function J(e){e.setAttribute("aria-hidden","true"),e.inert=!0}function K(e){let l=h.get(e);!l||(l["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",l["aria-hidden"]),e.inert=l.inert)}function ye(e,l=g(!0)){F(r=>{if(!l.value||!e.value)return;let o=e.value,a=N(o);if(a){b.add(o);for(let t of h.keys())t.contains(o)&&(K(t),h.delete(t));a.querySelectorAll(G).forEach(t=>{if(t instanceof HTMLElement){for(let n of b)if(t.contains(n))return;b.size===1&&(h.set(t,{"aria-hidden":t.getAttribute("aria-hidden"),inert:t.inert}),J(t))}}),r(()=>{if(b.delete(o),b.size>0)a.querySelectorAll(G).forEach(t=>{if(t instanceof HTMLElement&&!h.has(t)){for(let n of b)if(t.contains(n))return;h.set(t,{"aria-hidden":t.getAttribute("aria-hidden"),inert:t.inert}),J(t)}});else for(let t of h.keys())K(t),h.delete(t)})}})}let _=Symbol("StackContext");var L=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(L||{});function De(){return q(_,()=>{})}function be({type:e,element:l,onUpdate:r}){let o=De();function a(...t){r==null||r(...t),o(...t)}O(()=>{a(0,e,l),Q(()=>{a(1,e,l)})}),X(_,a)}var $e=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))($e||{});let M=Symbol("DialogContext");function A(e){let l=q(M,null);if(l===null){let r=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,A),r}return l}let E="DC8F892D-2EBD-447C-A4C8-A03058436FF4",Le=w({name:"Dialog",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},open:{type:[Boolean,String],default:E},initialFocus:{type:Object,default:null}},emits:{close:e=>!0},setup(e,{emit:l,attrs:r,slots:o,expose:a}){var t;let n=g(!1);O(()=>{n.value=!0});let p=g(0),$=ce(),k=v(()=>e.open===E&&$!==null?x($.value,{[Y.Open]:!0,[Y.Closed]:!1}):e.open),j=g(new Set),f=g(null),I=g(null),B=v(()=>N(f));if(a({el:f,$el:f}),!(e.open!==E||$!==null))throw new Error("You forgot to provide an `open` prop to the `Dialog`.");if(typeof k.value!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${k.value===E?void 0:e.open}`);let c=v(()=>n.value&&k.value?0:1),W=v(()=>c.value===0),T=v(()=>p.value>1),ee=q(M,null)!==null,te=v(()=>T.value?"parent":"leaf");ye(f,v(()=>T.value?W.value:!1)),be({type:"Dialog",element:f,onUpdate:(i,d,u)=>{if(d==="Dialog")return x(i,{[L.Add](){j.value.add(u),p.value+=1},[L.Remove](){j.value.delete(u),p.value-=1}})}});let le=pe({name:"DialogDescription",slot:v(()=>({open:k.value}))}),ae=`headlessui-dialog-${S()}`,C=g(null),D={titleId:C,panelRef:g(null),dialogState:c,setTitleId(i){C.value!==i&&(C.value=i)},close(){l("close",!1)}};return X(M,D),ve(()=>{var i,d,u;return[...Array.from((d=(i=B.value)==null?void 0:i.querySelectorAll("body > *, [data-headlessui-portal]"))!=null?d:[]).filter(s=>!(!(s instanceof HTMLElement)||s.contains(V(I))||D.panelRef.value&&s.contains(D.panelRef.value))),(u=D.panelRef.value)!=null?u:f.value]},(i,d)=>{D.close(),ue(()=>d==null?void 0:d.focus())},v(()=>c.value===0&&!T.value)),ge((t=B.value)==null?void 0:t.defaultView,"keydown",i=>{i.defaultPrevented||i.key===se.Escape&&c.value===0&&(T.value||(i.preventDefault(),i.stopPropagation(),D.close()))}),F(i=>{var d;if(c.value!==0||ee)return;let u=B.value;if(!u)return;let s=u==null?void 0:u.documentElement,m=(d=u.defaultView)!=null?d:window,oe=s.style.overflow,ie=s.style.paddingRight,z=m.innerWidth-s.clientWidth;if(s.style.overflow="hidden",z>0){let re=s.clientWidth-s.offsetWidth,ne=z-re;s.style.paddingRight=`${ne}px`}i(()=>{s.style.overflow=oe,s.style.paddingRight=ie})}),F(i=>{if(c.value!==0)return;let d=V(f);if(!d)return;let u=new IntersectionObserver(s=>{for(let m of s)m.boundingClientRect.x===0&&m.boundingClientRect.y===0&&m.boundingClientRect.width===0&&m.boundingClientRect.height===0&&D.close()});u.observe(d),i(()=>u.disconnect())}),()=>{let i={...r,ref:f,id:ae,role:"dialog","aria-modal":c.value===0?!0:void 0,"aria-labelledby":C.value,"aria-describedby":le.value},{open:d,initialFocus:u,...s}=e,m={open:c.value===0};return y(H,{force:!0},()=>[y(Z,()=>y(de,{target:f.value},()=>y(H,{force:!1},()=>y(R,{initialFocus:u,containers:j,features:W.value?x(te.value,{parent:R.features.RestoreFocus,leaf:R.features.All&~R.features.FocusLock}):R.features.None},()=>P({ourProps:i,theirProps:s,slot:m,attrs:r,slots:o,visible:c.value===0,features:U.RenderStrategy|U.Static,name:"Dialog"}))))),y(me,{features:he.Hidden,ref:I})])}}}),Me=w({name:"DialogOverlay",props:{as:{type:[Object,String],default:"div"}},setup(e,{attrs:l,slots:r}){let o=A("DialogOverlay"),a=`headlessui-dialog-overlay-${S()}`;function t(n){n.target===n.currentTarget&&(n.preventDefault(),n.stopPropagation(),o.close())}return()=>P({ourProps:{id:a,"aria-hidden":!0,onClick:t},theirProps:e,slot:{open:o.dialogState.value===0},attrs:l,slots:r,name:"DialogOverlay"})}}),qe=w({name:"DialogBackdrop",props:{as:{type:[Object,String],default:"div"}},inheritAttrs:!1,setup(e,{attrs:l,slots:r,expose:o}){let a=A("DialogBackdrop"),t=`headlessui-dialog-backdrop-${S()}`,n=g(null);return o({el:n,$el:n}),O(()=>{if(a.panelRef.value===null)throw new Error("A <DialogBackdrop /> component is being used, but a <DialogPanel /> component is missing.")}),()=>{let p=e,$={id:t,ref:n,"aria-hidden":!0};return y(H,{force:!0},()=>y(Z,()=>P({ourProps:$,theirProps:{...l,...p},slot:{open:a.dialogState.value===0},attrs:l,slots:r,name:"DialogBackdrop"})))}}}),Ie=w({name:"DialogPanel",props:{as:{type:[Object,String],default:"div"}},setup(e,{attrs:l,slots:r,expose:o}){let a=A("DialogPanel"),t=`headlessui-dialog-panel-${S()}`;o({el:a.panelRef,$el:a.panelRef});function n(p){p.stopPropagation()}return()=>{let p={id:t,ref:a.panelRef,onClick:n};return P({ourProps:p,theirProps:e,slot:{open:a.dialogState.value===0},attrs:l,slots:r,name:"DialogPanel"})}}}),We=w({name:"DialogTitle",props:{as:{type:[Object,String],default:"h2"}},setup(e,{attrs:l,slots:r}){let o=A("DialogTitle"),a=`headlessui-dialog-title-${S()}`;return O(()=>{o.setTitleId(a),Q(()=>o.setTitleId(null))}),()=>P({ourProps:{id:a},theirProps:e,slot:{open:o.dialogState.value===0},attrs:l,slots:r,name:"DialogTitle"})}}),ze=fe;export{Le as Dialog,qe as DialogBackdrop,ze as DialogDescription,Me as DialogOverlay,Ie as DialogPanel,We as DialogTitle};
