import{P as h,N as B,R as w,u as E}from"./render-0b5e10c9.mjs";import{t as O}from"./use-id-2e145a0f.mjs";import{o as v}from"./keyboard-c50452c7.mjs";import{o as T}from"./dom-d07dd68d.mjs";import{P,L as c}from"./focus-management-bdc6f191.mjs";import{b as L}from"./use-resolve-button-type-eb0c2f14.mjs";import{p as N,m as q}from"./hidden-8943c547.mjs";import{i as y,j as g,m as F,k as x,l as C,F as G,v as k,x as $,q as R,p as W}from"./entry-ce8d72d4.mjs";import"./owner-ef86f285.mjs";let U=y({props:{onFocus:{type:Function,required:!0}},setup(r){let s=g(!0);return()=>s.value?F(q,{as:"button",type:"button",features:N.Focusable,onFocus(i){i.preventDefault();let u,e=50;function o(){var l;if(e--<=0){u&&cancelAnimationFrame(u);return}if((l=r.onFocus)!=null&&l.call(r)){s.value=!1,cancelAnimationFrame(u);return}u=requestAnimationFrame(o)}u=requestAnimationFrame(o)}}):null}}),D=Symbol("TabsContext");function I(r){let s=R(D,null);if(s===null){let i=new Error(`<${r} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,I),i}return s}let X=y({name:"TabGroup",emits:{change:r=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(r,{slots:s,attrs:i,emit:u}){let e=g(null),o=g([]),l=g([]),p={selectedIndex:e,orientation:x(()=>r.vertical?"vertical":"horizontal"),activation:x(()=>r.manual?"manual":"auto"),tabs:o,panels:l,setSelectedIndex(a){e.value!==a&&(e.value=a,u("change",a))},registerTab(a){o.value.includes(a)||o.value.push(a)},unregisterTab(a){let n=o.value.indexOf(a);n!==-1&&o.value.splice(n,1)},registerPanel(a){l.value.includes(a)||l.value.push(a)},unregisterPanel(a){let n=l.value.indexOf(a);n!==-1&&l.value.splice(n,1)}};return W(D,p),C(()=>{var a;if(p.tabs.value.length<=0||r.selectedIndex===null&&e.value!==null)return;let n=p.tabs.value.map(b=>T(b)).filter(Boolean),d=n.filter(b=>!b.hasAttribute("disabled")),f=(a=r.selectedIndex)!=null?a:r.defaultIndex;if(f<0)e.value=n.indexOf(d[0]);else if(f>p.tabs.value.length)e.value=n.indexOf(d[d.length-1]);else{let b=n.slice(0,f),S=[...n.slice(f),...b].find(t=>d.includes(t));if(!S)return;e.value=n.indexOf(S)}}),()=>{let a={selectedIndex:e.value};return F(G,[o.value.length<=0&&F(U,{onFocus:()=>{for(let n of o.value){let d=T(n);if((d==null?void 0:d.tabIndex)===0)return d.focus(),!0}return!1}}),h({theirProps:{...i,...B(r,["selectedIndex","defaultIndex","manual","vertical","onChange"])},ourProps:{},slot:a,slots:s,attrs:i,name:"TabGroup"})])}}}),_=y({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(r,{attrs:s,slots:i}){let u=I("TabList");return()=>{let e={selectedIndex:u.selectedIndex.value},o={role:"tablist","aria-orientation":u.orientation.value};return h({ourProps:o,theirProps:r,slot:e,attrs:s,slots:i,name:"TabList"})}}}),ee=y({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1}},setup(r,{attrs:s,slots:i,expose:u}){let e=I("Tab"),o=`headlessui-tabs-tab-${O()}`,l=g(null);u({el:l,$el:l}),k(()=>e.registerTab(l)),$(()=>e.unregisterTab(l));let p=x(()=>e.tabs.value.indexOf(l)),a=x(()=>p.value===e.selectedIndex.value);function n(t){let m=e.tabs.value.map(A=>T(A)).filter(Boolean);if(t.key===v.Space||t.key===v.Enter){t.preventDefault(),t.stopPropagation(),e.setSelectedIndex(p.value);return}switch(t.key){case v.Home:case v.PageUp:return t.preventDefault(),t.stopPropagation(),P(m,c.First);case v.End:case v.PageDown:return t.preventDefault(),t.stopPropagation(),P(m,c.Last)}if(E(e.orientation.value,{vertical(){if(t.key===v.ArrowUp)return P(m,c.Previous|c.WrapAround);if(t.key===v.ArrowDown)return P(m,c.Next|c.WrapAround)},horizontal(){if(t.key===v.ArrowLeft)return P(m,c.Previous|c.WrapAround);if(t.key===v.ArrowRight)return P(m,c.Next|c.WrapAround)}}))return t.preventDefault()}function d(){var t;(t=T(l))==null||t.focus()}function f(){var t;r.disabled||((t=T(l))==null||t.focus(),e.setSelectedIndex(p.value))}function b(t){t.preventDefault()}let S=L(x(()=>({as:r.as,type:s.type})),l);return()=>{var t,m;let A={selected:a.value},j={ref:l,onKeydown:n,onFocus:e.activation.value==="manual"?d:f,onMousedown:b,onClick:f,id:o,role:"tab",type:S.value,"aria-controls":(m=(t=e.panels.value[p.value])==null?void 0:t.value)==null?void 0:m.id,"aria-selected":a.value,tabIndex:a.value?0:-1,disabled:r.disabled?!0:void 0};return h({ourProps:j,theirProps:r,slot:A,attrs:s,slots:i,name:"Tab"})}}}),te=y({name:"TabPanels",props:{as:{type:[Object,String],default:"div"}},setup(r,{slots:s,attrs:i}){let u=I("TabPanels");return()=>{let e={selectedIndex:u.selectedIndex.value};return h({theirProps:r,ourProps:{},slot:e,attrs:i,slots:s,name:"TabPanels"})}}}),ae=y({name:"TabPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0}},setup(r,{attrs:s,slots:i,expose:u}){let e=I("TabPanel"),o=`headlessui-tabs-panel-${O()}`,l=g(null);u({el:l,$el:l}),k(()=>e.registerPanel(l)),$(()=>e.unregisterPanel(l));let p=x(()=>e.panels.value.indexOf(l)),a=x(()=>p.value===e.selectedIndex.value);return()=>{var n,d;let f={selected:a.value},b={ref:l,id:o,role:"tabpanel","aria-labelledby":(d=(n=e.tabs.value[p.value])==null?void 0:n.value)==null?void 0:d.id,tabIndex:a.value?0:-1};return h({ourProps:b,theirProps:r,slot:f,attrs:s,slots:i,features:w.Static|w.RenderStrategy,visible:a.value,name:"TabPanel"})}}});export{ee as Tab,X as TabGroup,_ as TabList,ae as TabPanel,te as TabPanels};
